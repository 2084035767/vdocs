# 八、网络基本配置与应用

## 8.1 网络基本配置

### 网络基础知识

Internet最基本的网络协议是TCP/IP协议。

从协议分层模型方面来讲，TCP/IP的四个组成层次分别为：网络接口层、网络层、传输层、应用层。

**IP地址**

- IP地址是给每个连接在Internet上的主机分配的地址
- 每台联网的主机都有一个全球唯一的IP地址（也可以共享IP上网）
- 现在使用的IP地址系统是第四版，即IPV4，长度32位
- 为方便识别，IP地址常写成十进制形式，中间使用符号？
- 分开不同的字节，即“点分十进制表示法”，示例：
  - 二进制：11001010.0111 0011. 11000011. 1111 1110
  - 十进制：202.115.195.254 

**IP地址配置**

Ubuntu配置Ip
sudo vim/etc/netplan/o1-network-manager-all.yaml
sudo netplan apply

Ubuntu修改Ip
修改网卡的IP地址，可以采用ifconfig命令
ifconfig 设备名称 IP地址 netmask 子网掩码

### DNS配置

**1、DNS的基础知识**

- DNS是计算机域名系统的缩写，它是由解析器和域名服务器组成的。
- 域名服务器是指保存有该网络中所有主机的域名和对应IP地址，并具有将域名转换为IP地址功能的服务器。其中域名必须对应一个IP地址，而IP地址不一定只对应一个域名。
- 域名（DomainName），是由一串用句点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位。

- 记录IP地址与域名的对应关系的系统，称为DNS即DomainNameSystem：计算机域名系统
- DNS还负责将域名转换为IP地址
- IP地址与域名是1对多的关系

### hosts文件

**hosts文件**
在Ubuntu系统中，利用/etc/hosts文件可以实现从域名到地址的转换，其解析优先级高于resolved.conf文件
hosts文件每行为一个主机，每行由两个部份组成，由空格隔开
第一部分：网络IP地址：
第二部分：主机名或域名

- 编辑hosts文件$sudo vim /etc/hosts
- 添加解析数据

## 8.2 Linux常用网络命令

**查看或配置网卡信息**

| 命令         | 对应英文                      | 作用                                               |
| ------------ | ----------------------------- | -------------------------------------------------- |
| ifconfig     | configure a network interface | 查看/配置计算机当前的网卡配置信息                  |
| ping ip 地址 | ping                          | 检测到目标 ip 地址的连接是否正常                   |
| ip addr      |                               | 香查看本机ip地址和网卡等信息                       |
| netstat      | netstat                       | 检测网络端口的连接情况，是监控TCP/IP网络的有效工具 |

**网卡和 IP 地址（了解）**

网卡

- **网卡**是一个专门负责网络通讯的**硬件设备**
- **IP 地址**是设置在网卡上的**地址信息**

> 我们可以把电脑比作电话，网卡相当于 SIM 卡，IP 地址相当于电话号码

IP 地址

- 每台联网的电脑上都有**IP 地址**，是保证电脑之间**正常通讯**的**重要设置**

> 注意：每台电脑的 IP 地址不能相同，否则会出现 IP 地址冲突，并且没有办法正常通讯

### ifconfig

> `ifconfig`可以查看/配置计算机当前的网卡配置信息

常用命令示例

```bash
#查看网卡配置信息
$ifconfig
#查看网卡对应的IP地址
$ifconfig grepinet
# 如果要暂停某个网络接口的工作
ifconfig etho down
```

> 提示：一台计算机中有可能会有一个物理网卡和多个虚拟网卡，在 Linux 中物理网卡的名字通常以 ensxx 表示

### ping

常用命令示例

```bash
#检测到目标主机是否连接正常
$pingIP地址
#检测本地网卡工作正常
$ping 127.0.0.1
```

> 127.0.01 被称为本地回环/回地址，一般用来测试本机网卡是否正常

- `ping`一般用于检测当前计算机到目标计算机之间的网络**是否通畅，数值越大，速度越慢**

科普：

`ping`的工作原理与潜水艇的声纳相似，`ping`这个命令就是取自**声纳的声音**

网络管理员之间也常将 ping 用作动词 `ping`一下计算机 X，看他是否开着

原理：网络上的机器都有**唯一确定的 IP 地址**，我们给**目标 IP 地址**发送一个数据包，对方就要返回一个数据包，根据返回的数据包以及时间，我们可以确定目标主机的存在

> 提示：在 Linux 中，想要终止一个终端程序的执行，绝大多数都可以使用 CTRL+c

### netstat

> 使用此命令需要先安装net-tools
> $sudo apt install net-tools

| 选项 | 含义                                     |
| ---- | ---------------------------------------- |
| -a   | 列出所有端口                             |
| -n   | 以网络IP地址代替名称，显示出网络连接情形 |
| -s   | 显示所有端口的统计信息                   |
