# 九、常用服务器的搭建

## 9.1 远程登录和复制文件

| 命令                                              | 对应英文     | 作用         |
| ------------------------------------------------- | ------------ | ------------ |
| ssh 用户名@ip                                     | secure shell | 远程登陆     |
| scp 用户名@ip:文件名或路径 用户名@ip:文件名或路径 | secure copy  | 远程复制文件 |

### ssh 基础（重点）

在 Linux 中 SSH 是非常常用的工具，通过 SSH 客户端我们可以连接到运行了 SSH 服务器的远程机器上数据传输是加密的，可以防止信息泄漏

- **SSH 客户端**是一种使用`Secureshel1（SSH）`协议连接到远程计算机的软件程序
- `SSH`是目前较可靠，**专为远程登录会话和其他网络服务**提供安全性的协议
  - 利用`SSH`协议可以有效**防止远程管理过程中的信息泄露**
  - 通过`SSH`协议可以对所有传输的数据进行加密，也能够防止`DNS`欺骗和`IP`欺骗
- `SSH`的另一项优点是传输的数据可以是经过压缩的，所以可以加快传输的速度

**域名和端口号（了解）**

1. 域名

- 由一串用点分隔的名字组成，例如：`www.itcast.cr`
- IP 地址的别名，方便用户记忆

1. 端口号

- IP 地址：通过 IP 地址找到网络上的计算机
- 端口号：通过端口号可以找到计算机上运行的应用程序

> SSH 服务器的默认端口号是 22，如果是默认端口号，在连接的时候，可以省略

常见服务端口号列表：

| 服务       | 端口号 |
| ---------- | ------ |
| SSH 服务器 | 22     |
| Web 服务器 | 80     |
| HTTPS      | 443    |
| FTP 服务器 | 21     |

### SSH 客户端的简单使用

```bash
ssh [-p port] user@remote
# user 是在远程机器上的用户名，如果不指定的话默认为当前用户
# remote是远程机器的地址，可以是IP/域名，或者是后面会提到的别名
# port是SSHServer监听的端口，如果不指定，就为默认值22
# -p 是选项，工作中SSH服务器的端口号很有可能不是22，-p可指定端口号

```

提示：使用 exit 退出当前用户的登录

注意：

- ssh 这个终端命令只能在 Linux 或者 UNIX 系统下使用
- 如果在 Windows 系统中，可以安装 PUTTY 或者 xShel1 客户端软件即可

### scp （掌握）

- `Scp`就是`securecopy`，是一个在 Linux 下用来进行**远程拷贝文件**的命令
- 它的地址格式与`ssh`基本相同，需要注意的是，在指定端口时用的是大写的-P 而不是小写的

| 选项 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| -r   | 若给出的源文件是目录文件，则 scp 将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |
| -P   | 若远程 SSH 服务器的端口不是 22，需要使用大写字母-P 选项指定端口 |

- `scp`这个终端命令只能在 Linux 或者 UNIX 系统下使用
- 如果在 Windows 系统中，可以安装`PuTTY`，使用`pscp`命令行工具或者安装`Fi1ezi11a`使用`FTP`进行文件传输

常用命令示例

```bash
#把本地当前目录下的01.py文件复制到远程家目录下的Desktop/01.py
#注意：':'后面的路径如果不是绝对路径，则以用户的家目录作为参照路径
Scp -P port 01.py user@remote:Desktop/01.py
#把远程家目录下的Desktop/01.py文件复制到本地当前目录下的01.py
scp-P port user@remote:Desktop/01.py 01.py
#加上-r选项可以传送文件夹
#把当前目录下的demo文件夹复制到远程家目录下的Desktop
scp-r demo user@remote:Desktop
#把远程家目录下的Desktop复制到当前目录下的demo文件夹
Scp-r user@remote:Desktop demo

```

### SSH 高级（知道）

> 提示：有关 SSH 配置信息都保存在用户家目录下的.ssh 目录下

**免密码登录**

1. 配置公钥：

执行`ssh-keygen`即可生成 SSH 钥匙，一路回车即可

1. 上传公钥到服务器

执行`ssh-copy-id -p portuser@remote`，可以让远程服务器记住我们的公钥

**配置别名**

1. 每次都输入`ssh-p port user@remote`，时间久了会觉得很麻烦，特别是当`user`，`remote`和`port`都得输入，而且还不好记忆
2. 而**配置别名**可以让我们进一步偷懒，警如用：`ssh mac`来替代上面这么一长串，那么就在`/.ssh/config`里面追加以下内容：

```bash
Host mac
      HostName ip地址
      User zs
      Port 22

```

1. 保存之后，即可用`ssh mac`实现远程登录了，`scp`同样可以使用



